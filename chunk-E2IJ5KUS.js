import{a as Mt}from"./chunk-RB5VR4FE.js";import{na as pt,oa as ut,ra as mt,sa as _t,vb as yt,wb as ft}from"./chunk-HSKCSBWS.js";import"./chunk-XX3OU7O5.js";import"./chunk-P5LOYQB2.js";import"./chunk-HEI3NBOD.js";import{w as dt}from"./chunk-KV5YFX3I.js";import"./chunk-FPPZ4BUR.js";import"./chunk-QHBPP6FM.js";import{$a as Ue,Ab as b,Ac as lt,Ba as de,Bb as p,Ea as Le,Eb as qe,Fc as V,G as R,Gc as gt,Ja as He,Lb as Qe,Mb as Je,Qb as Ye,Qc as ct,Rb as Xe,Sb as et,Sc as me,T as Ge,U as C,Ub as tt,Vb as it,Wb as Z,Xb as _,Yb as u,Zb as pe,a as Ze,aa as m,ac as rt,ba as We,c as je,cb as T,da as Be,f as oe,fa as s,g as v,gb as Ve,hc as Ee,id as Pe,jd as ht,la as ce,ma as he,na as Ne,nc as ue,od as Ae,q as le,qa as F,qc as L,r as ge,rb as H,rc as Oe,sb as Ke,sc as xe,tb as U,tc as nt,va as z,vc as at,wc as st,yb as $e,yc as Se,zc as ot}from"./chunk-7GBT3Z6V.js";import{a as w,b as A,e as l,f as g,g as Te,h as y}from"./chunk-ZOGHMS73.js";var kt=["*"],I=class{_ngZone;_pending=[];_listeners=[];_targetStream=new v(void 0);_clearListeners(){for(let i of this._listeners)i.remove();this._listeners=[]}constructor(i){this._ngZone=i}getLazyEmitter(i){return this._targetStream.pipe(Ge(e=>{let t=new je(n=>{if(!e){this._pending.push({observable:t,observer:n});return}let a=e.addListener(i,o=>{this._ngZone.run(()=>n.next(o))});if(!a){n.complete();return}return this._listeners.push(a),()=>a.remove()});return t}))}setTarget(i){let e=this._targetStream.value;i!==e&&(e&&(this._clearListeners(),this._pending=[]),this._targetStream.next(i),this._pending.forEach(t=>t.observable.subscribe(t.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},K={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},vt="500px",zt="500px",f=(()=>{class r{_elementRef=s(Le);_ngZone=s(p);_eventManager=new I(s(p));_mapEl;_existingAuthFailureCallback;googleMap;_isBrowser;height=vt;width=zt;mapId;mapTypeId;set center(e){this._center=e}_center;set zoom(e){this._zoom=e}_zoom;set options(e){this._options=e||K}_options=K;mapInitialized=new b;authFailure=new b;boundsChanged=this._eventManager.getLazyEmitter("bounds_changed");centerChanged=this._eventManager.getLazyEmitter("center_changed");mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");headingChanged=this._eventManager.getLazyEmitter("heading_changed");idle=this._eventManager.getLazyEmitter("idle");maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed");mapMousemove=this._eventManager.getLazyEmitter("mousemove");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");projectionChanged=this._eventManager.getLazyEmitter("projection_changed");mapRightclick=this._eventManager.getLazyEmitter("rightclick");tilesloaded=this._eventManager.getLazyEmitter("tilesloaded");tiltChanged=this._eventManager.getLazyEmitter("tilt_changed");zoomChanged=this._eventManager.getLazyEmitter("zoom_changed");constructor(){let e=s(He);if(this._isBrowser=dt(e),this._isBrowser){let t=window;t.google,this._existingAuthFailureCallback=t.gm_authFailure,t.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(e){(e.height||e.width)&&this._setSize();let t=this.googleMap;t&&(e.options&&t.setOptions(this._combineOptions()),e.center&&this._center&&t.setCenter(this._center),e.zoom&&this._zoom!=null&&t.setZoom(this._zoom),e.mapTypeId&&this.mapTypeId&&t.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(e=>this._initialize(e.Map))}))}_initialize(e){this._ngZone.runOutsideAngular(()=>{this.googleMap=new e(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let e=window;e.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(e,t){this._assertInitialized(),this.googleMap.fitBounds(e,t)}panBy(e,t){this._assertInitialized(),this.googleMap.panBy(e,t)}panTo(e){this._assertInitialized(),this.googleMap.panTo(e)}panToBounds(e,t){this._assertInitialized(),this.googleMap.panToBounds(e,t)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(R(1)).toPromise()}_setSize(){if(this._mapEl){let e=this._mapEl.style;e.height=this.height===null?"":bt(this.height)||vt,e.width=this.width===null?"":bt(this.width)||zt}}_combineOptions(){let e=this._options||{};return A(w({},e),{center:this._center||e.center||K.center,zoom:this._zoom??e.zoom??K.zoom,mapTypeId:this.mapTypeId||e.mapTypeId||K.mapTypeId,mapId:this.mapId||e.mapId})}_assertInitialized(){this.googleMap}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],features:[de],ngContentSelectors:kt,decls:2,vars:0,consts:[[1,"map-container"]],template:function(t,n){t&1&&(Oe(),rt(0,"div",0),xe(1))},encapsulation:2,changeDetection:0})}return r})(),Ft=/([A-Za-z%]+)$/;function bt(r){return r==null?"":Ft.test(r)?r:`${r}px`}var wt=(()=>{class r{_map=s(f);_ngZone=s(p);_eventManager=new I(s(p));_options=new v({});_center=new v(void 0);_radius=new v(void 0);_destroyed=new oe;circle;set options(e){this._options.next(e||{})}set center(e){this._center.next(e)}set radius(e){this._radius.next(e)}centerChanged=this._eventManager.getLazyEmitter("center_changed");circleClick=this._eventManager.getLazyEmitter("click");circleDblclick=this._eventManager.getLazyEmitter("dblclick");circleDrag=this._eventManager.getLazyEmitter("drag");circleDragend=this._eventManager.getLazyEmitter("dragend");circleDragstart=this._eventManager.getLazyEmitter("dragstart");circleMousedown=this._eventManager.getLazyEmitter("mousedown");circleMousemove=this._eventManager.getLazyEmitter("mousemove");circleMouseout=this._eventManager.getLazyEmitter("mouseout");circleMouseover=this._eventManager.getLazyEmitter("mouseover");circleMouseup=this._eventManager.getLazyEmitter("mouseup");radiusChanged=this._eventManager.getLazyEmitter("radius_changed");circleRightclick=this._eventManager.getLazyEmitter("rightclick");circleInitialized=new b;constructor(){}ngOnInit(){this._map._isBrowser&&this._combineOptions().pipe(R(1)).subscribe(e=>{google.maps.Circle&&this._map.googleMap?this._initialize(this._map.googleMap,google.maps.Circle,e):this._ngZone.runOutsideAngular(()=>{Promise.all([this._map._resolveMap(),google.maps.importLibrary("maps")]).then(([t,n])=>{this._initialize(t,n.Circle,e)})})})}_initialize(e,t,n){this._ngZone.runOutsideAngular(()=>{this.circle=new t(n),this._assertInitialized(),this.circle.setMap(e),this._eventManager.setTarget(this.circle),this.circleInitialized.emit(this.circle),this._watchForOptionsChanges(),this._watchForCenterChanges(),this._watchForRadiusChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroyed.next(),this._destroyed.complete(),this.circle?.setMap(null)}getBounds(){return this._assertInitialized(),this.circle.getBounds()}getCenter(){return this._assertInitialized(),this.circle.getCenter()}getDraggable(){return this._assertInitialized(),this.circle.getDraggable()}getEditable(){return this._assertInitialized(),this.circle.getEditable()}getRadius(){return this._assertInitialized(),this.circle.getRadius()}getVisible(){return this._assertInitialized(),this.circle.getVisible()}_combineOptions(){return ge([this._options,this._center,this._radius]).pipe(le(([e,t,n])=>A(w({},e),{center:t||e.center,radius:n!==void 0?n:e.radius})))}_watchForOptionsChanges(){this._options.pipe(C(this._destroyed)).subscribe(e=>{this._assertInitialized(),this.circle.setOptions(e)})}_watchForCenterChanges(){this._center.pipe(C(this._destroyed)).subscribe(e=>{e&&(this._assertInitialized(),this.circle.setCenter(e))})}_watchForRadiusChanges(){this._radius.pipe(C(this._destroyed)).subscribe(e=>{e!==void 0&&(this._assertInitialized(),this.circle.setRadius(e))})}_assertInitialized(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=U({type:r,selectors:[["map-circle"]],inputs:{options:"options",center:"center",radius:"radius"},outputs:{centerChanged:"centerChanged",circleClick:"circleClick",circleDblclick:"circleDblclick",circleDrag:"circleDrag",circleDragend:"circleDragend",circleDragstart:"circleDragstart",circleMousedown:"circleMousedown",circleMousemove:"circleMousemove",circleMouseout:"circleMouseout",circleMouseover:"circleMouseover",circleMouseup:"circleMouseup",radiusChanged:"radiusChanged",circleRightclick:"circleRightclick",circleInitialized:"circleInitialized"},exportAs:["mapCircle"]})}return r})();var $=(()=>{class r{_googleMap=s(f);_elementRef=s(Le);_ngZone=s(p);_eventManager=new I(s(p));_options=new v({});_position=new v(void 0);_destroy=new oe;infoWindow;set options(e){this._options.next(e||{})}set position(e){this._position.next(e)}closeclick=this._eventManager.getLazyEmitter("closeclick");contentChanged=this._eventManager.getLazyEmitter("content_changed");domready=this._eventManager.getLazyEmitter("domready");positionChanged=this._eventManager.getLazyEmitter("position_changed");zindexChanged=this._eventManager.getLazyEmitter("zindex_changed");infoWindowInitialized=new b;constructor(){}ngOnInit(){this._googleMap._isBrowser&&this._combineOptions().pipe(R(1)).subscribe(e=>{google.maps.InfoWindow?this._initialize(google.maps.InfoWindow,e):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(t=>{this._initialize(t.InfoWindow,e)})})})}_initialize(e,t){this._ngZone.runOutsideAngular(()=>{this.infoWindow=new e(t),this._eventManager.setTarget(this.infoWindow),this.infoWindowInitialized.emit(this.infoWindow),this._watchForOptionsChanges(),this._watchForPositionChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroy.next(),this._destroy.complete(),this.infoWindow&&this.close()}close(){this._assertInitialized(),this.infoWindow.close()}getContent(){return this._assertInitialized(),this.infoWindow.getContent()||null}getPosition(){return this._assertInitialized(),this.infoWindow.getPosition()||null}getZIndex(){return this._assertInitialized(),this.infoWindow.getZIndex()}openAdvancedMarkerElement(e,t){this.open({getAnchor:()=>e},void 0,t)}open(e,t,n){this._assertInitialized();let a=e?e.getAnchor():void 0;(this.infoWindow.get("anchor")!==a||!a)&&(this._elementRef.nativeElement.style.display=n?"none":"",n&&this.infoWindow.setContent(n),this.infoWindow.open({map:this._googleMap.googleMap,anchor:a,shouldFocus:t}))}_combineOptions(){return ge([this._options,this._position]).pipe(le(([e,t])=>A(w({},e),{position:t||e.position,content:this._elementRef.nativeElement})))}_watchForOptionsChanges(){this._options.pipe(C(this._destroy)).subscribe(e=>{this._assertInitialized(),this.infoWindow.setOptions(e)})}_watchForPositionChanges(){this._position.pipe(C(this._destroy)).subscribe(e=>{e&&(this._assertInitialized(),this.infoWindow.setPosition(e))})}_assertInitialized(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=U({type:r,selectors:[["map-info-window"]],hostAttrs:[2,"display","none"],inputs:{options:"options",position:"position"},outputs:{closeclick:"closeclick",contentChanged:"contentChanged",domready:"domready",positionChanged:"positionChanged",zindexChanged:"zindexChanged",infoWindowInitialized:"infoWindowInitialized"},exportAs:["mapInfoWindow"]})}return r})();var Ct=new Be("MAP_MARKER");var It=(()=>{class r{_map=s(f);_ngZone=s(p);_eventManager=new I(s(p));_options=new v({});_paths=new v(void 0);_destroyed=new oe;polygon;set options(e){this._options.next(e||{})}set paths(e){this._paths.next(e)}polygonClick=this._eventManager.getLazyEmitter("click");polygonDblclick=this._eventManager.getLazyEmitter("dblclick");polygonDrag=this._eventManager.getLazyEmitter("drag");polygonDragend=this._eventManager.getLazyEmitter("dragend");polygonDragstart=this._eventManager.getLazyEmitter("dragstart");polygonMousedown=this._eventManager.getLazyEmitter("mousedown");polygonMousemove=this._eventManager.getLazyEmitter("mousemove");polygonMouseout=this._eventManager.getLazyEmitter("mouseout");polygonMouseover=this._eventManager.getLazyEmitter("mouseover");polygonMouseup=this._eventManager.getLazyEmitter("mouseup");polygonRightclick=this._eventManager.getLazyEmitter("rightclick");polygonInitialized=new b;constructor(){}ngOnInit(){this._map._isBrowser&&this._combineOptions().pipe(R(1)).subscribe(e=>{google.maps.Polygon&&this._map.googleMap?this._initialize(this._map.googleMap,google.maps.Polygon,e):this._ngZone.runOutsideAngular(()=>{Promise.all([this._map._resolveMap(),google.maps.importLibrary("maps")]).then(([t,n])=>{this._initialize(t,n.Polygon,e)})})})}_initialize(e,t,n){this._ngZone.runOutsideAngular(()=>{this.polygon=new t(n),this._assertInitialized(),this.polygon.setMap(e),this._eventManager.setTarget(this.polygon),this.polygonInitialized.emit(this.polygon),this._watchForOptionsChanges(),this._watchForPathChanges()})}ngOnDestroy(){this._eventManager.destroy(),this._destroyed.next(),this._destroyed.complete(),this.polygon?.setMap(null)}getDraggable(){return this._assertInitialized(),this.polygon.getDraggable()}getEditable(){return this._assertInitialized(),this.polygon.getEditable()}getPath(){return this._assertInitialized(),this.polygon.getPath()}getPaths(){return this._assertInitialized(),this.polygon.getPaths()}getVisible(){return this._assertInitialized(),this.polygon.getVisible()}_combineOptions(){return ge([this._options,this._paths]).pipe(le(([e,t])=>A(w({},e),{paths:t||e.paths})))}_watchForOptionsChanges(){this._options.pipe(C(this._destroyed)).subscribe(e=>{this._assertInitialized(),this.polygon.setOptions(e)})}_watchForPathChanges(){this._paths.pipe(C(this._destroyed)).subscribe(e=>{e&&(this._assertInitialized(),this.polygon.setPaths(e))})}_assertInitialized(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=U({type:r,selectors:[["map-polygon"]],inputs:{options:"options",paths:"paths"},outputs:{polygonClick:"polygonClick",polygonDblclick:"polygonDblclick",polygonDrag:"polygonDrag",polygonDragend:"polygonDragend",polygonDragstart:"polygonDragstart",polygonMousedown:"polygonMousedown",polygonMousemove:"polygonMousemove",polygonMouseout:"polygonMouseout",polygonMouseover:"polygonMouseover",polygonMouseup:"polygonMouseup",polygonRightclick:"polygonRightclick",polygonInitialized:"polygonInitialized"},exportAs:["mapPolygon"]})}return r})();var Tt={position:{lat:37.221995,lng:-122.184092}},Dt=(()=>{class r{_googleMap=s(f);_ngZone=s(p);_eventManager=new I(s(p));set title(e){this._title=e}_title;set position(e){this._position=e}_position;set content(e){this._content=e}_content;set gmpDraggable(e){this._draggable=e}_draggable;set options(e){this._options=e}_options;set zIndex(e){this._zIndex=e}_zIndex;mapClick=this._eventManager.getLazyEmitter("click");mapDblclick=this._eventManager.getLazyEmitter("dblclick");mapMouseout=this._eventManager.getLazyEmitter("mouseout");mapMouseover=this._eventManager.getLazyEmitter("mouseover");mapMouseup=this._eventManager.getLazyEmitter("mouseup");mapRightclick=this._eventManager.getLazyEmitter("rightclick");mapDrag=this._eventManager.getLazyEmitter("drag");mapDragend=this._eventManager.getLazyEmitter("dragend");mapDragstart=this._eventManager.getLazyEmitter("dragstart");markerInitialized=new b;advancedMarker;constructor(){}ngOnInit(){this._googleMap._isBrowser&&(google.maps.marker?.AdvancedMarkerElement&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.marker.AdvancedMarkerElement):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([e,t])=>{this._initialize(e,t.AdvancedMarkerElement)})}))}_initialize(e,t){this._ngZone.runOutsideAngular(()=>{this.advancedMarker=new t(this._combineOptions()),this._assertInitialized(),this.advancedMarker.map=e,this._eventManager.setTarget(this.advancedMarker),this.markerInitialized.next(this.advancedMarker)})}ngOnChanges(e){let{advancedMarker:t,_content:n,_position:a,_title:o,_draggable:h,_zIndex:c}=this;t&&(e.title&&(t.title=o),e.gmpDraggable&&(t.gmpDraggable=h),e.content&&(t.content=n),e.position&&(t.position=a),e.zIndex&&(t.zIndex=c))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.advancedMarker&&(this.advancedMarker.map=null)}getAnchor(){return this._assertInitialized(),this.advancedMarker}_resolveMarker(){return this.advancedMarker?Promise.resolve(this.advancedMarker):this.markerInitialized.pipe(R(1)).toPromise()}_combineOptions(){let e=this._options||Tt;return A(w({},e),{title:this._title||e.title,position:this._position||e.position,content:this._content||e.content,zIndex:this._zIndex??e.zIndex,gmpDraggable:this._draggable??e.gmpDraggable,map:this._googleMap.googleMap})}_assertInitialized(){}static \u0275fac=function(t){return new(t||r)};static \u0275dir=U({type:r,selectors:[["map-advanced-marker"]],inputs:{title:"title",position:"position",content:"content",gmpDraggable:"gmpDraggable",options:"options",zIndex:"zIndex"},outputs:{mapClick:"mapClick",mapDblclick:"mapDblclick",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",mapMouseup:"mapMouseup",mapRightclick:"mapRightclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",markerInitialized:"markerInitialized"},exportAs:["mapAdvancedMarker"],features:[me([{provide:Ct,useExisting:r}]),de]})}return r})(),Lt=(()=>{class r{_googleMap=s(f);_ngZone=s(p);_currentMarkers=new Set;_closestMapEventManager=new I(this._ngZone);_markersSubscription=Ze.EMPTY;_canInitialize=this._googleMap._isBrowser;renderer;algorithm;clusteringbegin=this._closestMapEventManager.getLazyEmitter("clusteringbegin");clusteringend=this._closestMapEventManager.getLazyEmitter("clusteringend");clusterClick=new b;markerClustererInitialized=new b;_markers;markerClusterer;ngOnInit(){return y(this,null,function*(){this._canInitialize&&(yield this._createCluster(),this._closestMapEventManager.setTarget(this._googleMap.googleMap))})}ngOnChanges(e){return y(this,null,function*(){let t=e.renderer||e.algorithm;this.markerClusterer&&t&&!t.isFirstChange()&&(yield this._createCluster())})}ngOnDestroy(){this._markersSubscription.unsubscribe(),this._closestMapEventManager.destroy(),this._destroyCluster()}_createCluster(){return y(this,null,function*(){markerClusterer?.MarkerClusterer;let e=yield this._googleMap._resolveMap();this._destroyCluster(),this._ngZone.runOutsideAngular(()=>{this.markerClusterer=new markerClusterer.MarkerClusterer({map:e,renderer:this.renderer,algorithm:this.algorithm,onClusterClick:(t,n,a)=>{this.clusterClick.observers.length?this._ngZone.run(()=>this.clusterClick.emit(n)):markerClusterer.defaultOnClusterClickHandler(t,n,a)}}),this.markerClustererInitialized.emit(this.markerClusterer)}),yield this._watchForMarkerChanges()})}_watchForMarkerChanges(){return y(this,null,function*(){this._assertInitialized();let e=[],t=yield this._getInternalMarkers(this._markers.toArray());for(let n of t)this._currentMarkers.add(n),e.push(n);this.markerClusterer.addMarkers(e),this._markersSubscription.unsubscribe(),this._markersSubscription=this._markers.changes.subscribe(n=>y(this,null,function*(){this._assertInitialized();let a=new Set(yield this._getInternalMarkers(n)),o=[],h=[];for(let c of Array.from(a))this._currentMarkers.has(c)||(this._currentMarkers.add(c),o.push(c));for(let c of Array.from(this._currentMarkers))a.has(c)||h.push(c);this.markerClusterer.addMarkers(o,!0),this.markerClusterer.removeMarkers(h,!0),this.markerClusterer.render();for(let c of h)this._currentMarkers.delete(c)}))})}_destroyCluster(){this.markerClusterer?.onRemove(),this.markerClusterer=void 0}_getInternalMarkers(e){return Promise.all(e.map(t=>t._resolveMarker()))}_assertInitialized(){}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=H({type:r,selectors:[["map-marker-clusterer"]],contentQueries:function(t,n,a){if(t&1&&nt(a,Ct,5),t&2){let o;at(o=st())&&(n._markers=o)}},inputs:{renderer:"renderer",algorithm:"algorithm"},outputs:{clusteringbegin:"clusteringbegin",clusteringend:"clusteringend",clusterClick:"clusterClick",markerClustererInitialized:"markerClustererInitialized"},exportAs:["mapMarkerClusterer"],features:[de],ngContentSelectors:kt,decls:1,vars:0,template:function(t,n){t&1&&(Oe(),xe(0))},encapsulation:2,changeDetection:0})}return r})();var Et=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ke({type:r});static \u0275inj=We({})}return r})();function jt(r,i,e,t){function n(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function h(d){try{k(t.next(d))}catch(M){o(M)}}function c(d){try{k(t.throw(d))}catch(M){o(M)}}function k(d){d.done?a(d.value):n(d.value).then(h,c)}k((t=t.apply(r,i||[])).next())})}function Gt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Re,Ot;function Wt(){return Ot||(Ot=1,Re=function r(i,e){if(i===e)return!0;if(i&&e&&typeof i=="object"&&typeof e=="object"){if(i.constructor!==e.constructor)return!1;var t,n,a;if(Array.isArray(i)){if(t=i.length,t!=e.length)return!1;for(n=t;n--!==0;)if(!r(i[n],e[n]))return!1;return!0}if(i.constructor===RegExp)return i.source===e.source&&i.flags===e.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===e.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===e.toString();if(a=Object.keys(i),t=a.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,a[n]))return!1;for(n=t;n--!==0;){var o=a[n];if(!r(i[o],e[o]))return!1}return!0}return i!==i&&e!==e}),Re}var Bt=Wt(),Nt=Gt(Bt),xt="__googleMapsScriptId",q=(function(r){return r[r.INITIALIZED=0]="INITIALIZED",r[r.LOADING=1]="LOADING",r[r.SUCCESS=2]="SUCCESS",r[r.FAILURE=3]="FAILURE",r})(q||{}),_e=class r{constructor({apiKey:i,authReferrerPolicy:e,channel:t,client:n,id:a=xt,language:o,libraries:h=[],mapIds:c,nonce:k,region:d,retries:M=3,url:re="https://maps.googleapis.com/maps/api/js",version:B}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=i,this.authReferrerPolicy=e,this.channel=t,this.client=n,this.id=a||xt,this.language=o,this.libraries=h,this.mapIds=c,this.nonce=k,this.region=d,this.retries=M,this.url=re,this.version=B,r.instance){if(!Nt(this.options,r.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(r.instance.options)}`);return r.instance}r.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?q.FAILURE:this.done?q.SUCCESS:this.loading?q.LOADING:q.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let i=this.url;return i+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(i+=`&key=${this.apiKey}`),this.channel&&(i+=`&channel=${this.channel}`),this.client&&(i+=`&client=${this.client}`),this.libraries.length>0&&(i+=`&libraries=${this.libraries.join(",")}`),this.language&&(i+=`&language=${this.language}`),this.region&&(i+=`&region=${this.region}`),this.version&&(i+=`&v=${this.version}`),this.mapIds&&(i+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(i+=`&auth_referrer_policy=${this.authReferrerPolicy}`),i}deleteScript(){let i=document.getElementById(this.id);i&&i.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((i,e)=>{this.loadCallback(t=>{t?e(t.error):i(window.google)})})}importLibrary(i){return this.execute(),google.maps.importLibrary(i)}loadCallback(i){this.callbacks.push(i),this.execute()}setScript(){var i,e;if(document.getElementById(this.id)){this.callback();return}let t={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(t).forEach(a=>!t[a]&&delete t[a]),!((e=(i=window?.google)===null||i===void 0?void 0:i.maps)===null||e===void 0)&&e.importLibrary||(a=>{let o,h,c,k="The Google Maps JavaScript API",d="google",M="importLibrary",re="__ib__",B=document,N=window;N=N[d]||(N[d]={});let ne=N.maps||(N.maps={}),Fe=new Set,ae=new URLSearchParams,At=()=>o||(o=new Promise((se,Ie)=>jt(this,void 0,void 0,function*(){var De;yield h=B.createElement("script"),h.id=this.id,ae.set("libraries",[...Fe]+"");for(c in a)ae.set(c.replace(/[A-Z]/g,Rt=>"_"+Rt[0].toLowerCase()),a[c]);ae.set("callback",d+".maps."+re),h.src=this.url+"?"+ae,ne[re]=se,h.onerror=()=>o=Ie(Error(k+" could not load.")),h.nonce=this.nonce||((De=B.querySelector("script[nonce]"))===null||De===void 0?void 0:De.nonce)||"",B.head.append(h)})));ne[M]?console.warn(k+" only loads once. Ignoring:",a):ne[M]=(se,...Ie)=>Fe.add(se)&&At().then(()=>ne[M](se,...Ie))})(t);let n=this.libraries.map(a=>this.importLibrary(a));n.length||n.push(this.importLibrary("core")),Promise.all(n).then(()=>this.callback(),a=>{let o=new ErrorEvent("error",{error:a});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(i){if(this.errors.push(i),this.errors.length<=this.retries){let e=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.onerrorEvent=i,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(i=>{i(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}};var ye,E=class E{constructor(){g(this,ye,"AIzaSyASyYRBZmULmrmw_P9kgr7_266OhFNinPA");this.loader=new _e({apiKey:l(this,ye),id:"_coreui-google-maps",version:"weekly",libraries:["maps","marker"]})}ngOnDestroy(){this.loader.deleteScript()}};ye=new WeakMap,E.\u0275fac=function(e){return new(e||E)},E.\u0275prov=m({token:E,factory:E.\u0275fac,providedIn:"root"});var G=E;var J,O=class O{constructor(){g(this,J,s(G).loader);this.apiLoaded=z(!1);l(this,J).importLibrary("maps").then(i=>y(this,null,function*(){this.apiLoaded.set(!0)})).catch(i=>{this.apiLoaded.set(!1),console.log('"@googlemaps/js-api-loader" importLibrary("maps") rejected:',i)})}ngOnDestroy(){l(this,J).deleteScript()}};J=new WeakMap,O.\u0275fac=function(e){return new(e||O)},O.\u0275prov=m({token:O,factory:O.\u0275fac});var Q=O;var Me,ve,D,Y,ze,St,x=class x{constructor(){g(this,ze);g(this,Me,s(F));g(this,ve,s(Ve));g(this,D,l(this,ve).createRenderer(null,null));this.loaded=z(!1);g(this,Y,new Set)}loadScript(i){if(l(this,Y).has(i)){this.loaded.set(!0);return}Te(this,ze,St).call(this,i).catch(e=>{console.log("rejected:",i,e)}).then(e=>{l(this,Y).add(i),this.loaded.set(!0)})}};Me=new WeakMap,ve=new WeakMap,D=new WeakMap,Y=new WeakMap,ze=new WeakSet,St=function(i){return new Promise((e,t)=>{let n=l(this,D).createElement("script");l(this,D).setAttribute(n,"type","text/javascript"),l(this,D).setAttribute(n,"src",i),l(this,D).setProperty(n,"loading","async"),n.onload=()=>{e({loaded:!0})},n.onerror=a=>t({loaded:!1,error:a}),l(this,D).appendChild(l(this,Me).head,n)})},x.\u0275fac=function(e){return new(e||x)},x.\u0275prov=m({token:x,factory:x.\u0275fac,providedIn:"root"});var fe=x;var be,ee,ke,S=class S{constructor(){g(this,be,s(F));g(this,ee,s(G).loader);this.markers=z([]);g(this,ke,[{position:{lat:37.431489,lng:-122.163719},glyph:"S",title:"Stanford",www:"https://www.stanford.edu/"},{position:{lat:37.394694,lng:-122.150333},glyph:"T",title:"Tesla",www:"https://www.tesla.com/"},{position:{lat:37.334831,lng:-122.008961},glyph:"A",title:"Apple",www:"https://www.apple.com/"},{position:{lat:37.484722,lng:-122.148333},glyph:"F",title:"Facebook",www:"https://www.facebook.com/"}]);this.options={center:{lat:37.42,lng:-122.103719},zoom:10,mapId:"DEMO_MAP_ID"};this.vertices=[{lat:37.7,lng:-122.5},{lat:37.708,lng:-122.37},{lat:37.8,lng:-122.4},{lat:37.78,lng:-122.51}];this.circleCenter={lat:37.523,lng:-122.036};this.initPins().then(i=>this.markers.set(i))}ngOnDestroy(){l(this,ee).deleteScript()}initPins(){return y(this,null,function*(){let i=yield l(this,ee).importLibrary("marker").catch(t=>(console.log('"@googlemaps/js-api-loader" importLibrary("marker") rejected:',t),null));if(!i)return[];let{PinElement:e}=i;return l(this,ke).map(t=>{let n=new e({glyph:t.glyph,glyphColor:"white"});return t.content=n.element,t})})}get beachFlag(){let i=l(this,be).createElement("img");return i.src="https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",i}get markerOptions(){return this.markerOptionsCache||(this.markerOptionsCache={gmpDraggable:!1}),this.markerOptionsCache}};be=new WeakMap,ee=new WeakMap,ke=new WeakMap,S.\u0275fac=function(e){return new(e||S)},S.\u0275prov=m({token:S,factory:S.\u0275fac});var X=S;var ie,P=class P{constructor(){this.mapHeight=z("65vh");this.target=z(void 0);g(this,ie,new ResizeObserver(i=>{let e=i[0].contentRect.height;if(e<530)return;let t=`${e-300}px`;this.mapHeight.set(t)}));this.targetEffect=ht(()=>{let i=this.target();i&&l(this,ie).observe(i)})}ngOnDestroy(){let i=this.target();i&&l(this,ie).unobserve(i)}};ie=new WeakMap,P.\u0275fac=function(e){return new(e||P)},P.\u0275prov=m({token:P,factory:P.\u0275fac});var te=P;var Ht=()=>[Dt,Lt,f,wt,$,It];function Ut(r,i){if(r&1){let e=Ee();_(0,"map-advanced-marker",10,1),ue("mapClick",function(){let n=ce(e).$implicit,a=lt(1),o=L(3);return he(o.openInfoWindow(a,n))}),u()}if(r&2){let e=i.$implicit,t=L(3);Z("options",t.markerOptions)("position",e.position)("content",e.content)("title",e.title)}}function Vt(r,i){if(r&1){let e=Ee();_(0,"google-map",4,0)(2,"map-polygon",5),ue("polygonClick",function(n){ce(e);let a=L(2);return he(a.showPolygonInfoWindow(n))}),u(),_(3,"map-circle",6),ue("circleClick",function(n){ce(e);let a=L(2);return he(a.showCircleInfoWindow(n))}),u(),_(4,"map-marker-clusterer"),tt(5,Ut,2,4,"map-advanced-marker",7,et),u(),_(7,"map-info-window")(8,"div",8)(9,"a",9)(10,"strong"),V(11),u()()(),pe(12,"br"),u()()}if(r&2){let e=L(2);Z("height",e.mapHeight())("options",e.options)("width","100%"),T(2),Z("paths",e.vertices),T(),Z("center",e.circleCenter)("radius",3e3),T(2),it(e.markers()),T(4),Z("href",ct(e.activeInfoWindow==null?null:e.activeInfoWindow.www),Ue),T(2),gt(e.activeInfoWindow==null?null:e.activeInfoWindow.title)}}function Kt(r,i){if(r&1&&Ye(0,Vt,13,9,"google-map",4),r&2){let e=L();Xe(e.scriptLoaded()?0:-1)}}function $t(r,i){r&1&&(_(0,"div",11),Ne(),_(1,"svg",12)(2,"title"),V(3,"Map Placeholder"),u(),pe(4,"rect",13),u()())}function qt(r,i){r&1&&(_(0,"p"),V(1,"Failed to load the map"),u())}var we,Ce,W=class W{constructor(){this.title="";g(this,we,"https://unpkg.com/@googlemaps/markerclusterer/dist/index.min.js");g(this,Ce,s(F));this.googleMapsLoaderService=s(Q);this.scriptInjectorService=s(fe);this.googleMapsResizeObserverService=s(te);this.googleMapsDataService=s(X);this.markers=this.googleMapsDataService.markers;this.options=this.googleMapsDataService.options;this.circleCenter=this.googleMapsDataService.circleCenter;this.vertices=this.googleMapsDataService.vertices;this.scriptLoaded=Pe(()=>this.scriptInjectorService.loaded()&&this.googleMapsLoaderService.apiLoaded());this.mapHeight=Pe(()=>this.googleMapsResizeObserverService.mapHeight());this.googleMap=Ae(f);this.infoWindow=Ae($);this.scriptInjectorService.loadScript(l(this,we)),this.googleMapsResizeObserverService.target.set(l(this,Ce).body)}get markerOptions(){return this.googleMapsDataService.markerOptions}get infoWindowContent(){return this.activeInfoWindow}set infoWindowContent(i){this.title=i.title,this.activeInfoWindow=i;let e=this.infoWindow();e&&(e.position=i.position,e.open())}openInfoWindow(i,e){this.infoWindowContent=e,this.infoWindow()?.open(i)}showPolygonInfoWindow(i){let e={position:{lat:i?.latLng?.lat()??0,lng:i?.latLng?.lng()??0},title:"San Francisco",www:"https://en.wikipedia.org/wiki/San_Francisco"};this.infoWindowContent=e}showCircleInfoWindow(i){let e={position:w({},this.circleCenter),title:"Newark",www:"https://en.wikipedia.org/wiki/Newark,_California"};this.infoWindowContent=e}};we=new WeakMap,Ce=new WeakMap,W.\u0275fac=function(e){return new(e||W)},W.\u0275cmp=H({type:W,selectors:[["app-google-maps-integration"]],viewQuery:function(e,t){e&1&&(Se(t.googleMap,f,5),Se(t.infoWindow,$,5)),e&2&&ot(2)},features:[me([Q,X,te])],decls:10,vars:0,consts:[["googleMap","googleMap"],["marker","mapAdvancedMarker"],[500,null],["href","https://github.com/angular/components/tree/master/src/google-maps"],[3,"height","options","width"],[3,"polygonClick","paths"],[3,"circleClick","center","radius"],[3,"options","position","content","title"],[1,"ms-1","me-3","mt-1","mb-0"],["target","_blank",3,"href"],[3,"mapClick","options","position","content","title"],["cPlaceholderAnimation","glow"],["xmlns","http://www.w3.org/2000/svg","aria-label","Placeholder","cCardImg","top","focusable","false","preserveAspectRatio","xMidYMid slice","role","img","width","100%","cPlaceholder","",2,"height","65vh"],["fill","#868e96","height","100%","width","100%"]],template:function(e,t){e&1&&(_(0,"c-card")(1,"c-card-header"),V(2," Angular Google Maps "),pe(3,"app-docs-link",3),u(),_(4,"c-card-body"),$e(5,Kt,1,1)(6,$t,5,0)(7,qt,2,0),Qe(8,5,Ht,6,null,7,2,null,qe),Je(),u()())},dependencies:[Mt,pt,mt,ut,Et,yt,ft,_t],encapsulation:2});var Pt=W;export{Pt as GoogleMapsComponent};
