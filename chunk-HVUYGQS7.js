import{a as ne}from"./chunk-P5MX555A.js";import{a as re}from"./chunk-XVUFOYT7.js";import{a as se}from"./chunk-LJ5LN32T.js";import{Ab as oe,Ea as X,Fa as ee,Ha as te,Q as J,Sa as ae,Wa as I,X as U,Ya as R,b as q,cc as ie,e as x,f as w,g as W,j as V,m as B,na as O,oa as M,p as N,q as Q,r as A,ra as T,v as Y,y as P}from"./chunk-HSKCSBWS.js";import"./chunk-XX3OU7O5.js";import"./chunk-P5LOYQB2.js";import"./chunk-HEI3NBOD.js";import{k as H,l as k,u as E}from"./chunk-KV5YFX3I.js";import"./chunk-FPPZ4BUR.js";import"./chunk-QHBPP6FM.js";import{Ab as $,B as K,Fc as m,Hc as b,Ic as Z,Wb as s,Xb as i,Yb as n,Zb as p,cb as r,hc as S,ib as z,la as _,m as j,ma as F,nc as g,qc as f,rb as y,xb as h}from"./chunk-7GBT3Z6V.js";import"./chunk-ZOGHMS73.js";function ue(d,a){d&1&&p(0,"c-spinner",9)}var C=class C{constructor(){this.dateRangeChange=new $;this.isLoading=!1;let a=new Date,t=a.getFullYear(),e=a.getMonth();this.defaultStartDate=new Date(t,e,1,12,0,0,0),this.defaultEndDate=new Date(t,e,a.getDate(),12,0,0,0),this.dateForm=new W({startDate:new V(this.defaultStartDate),endDate:new V(this.defaultEndDate)})}ngOnInit(){this.dateForm.patchValue({startDate:this.defaultStartDate,endDate:this.defaultEndDate}),setTimeout(()=>{this.emitDefaultDateRange()},100)}emitDefaultDateRange(){let a=this.formatDate(this.defaultStartDate),t=this.formatDate(this.defaultEndDate);this.dateRangeChange.emit({startDate:a,endDate:t})}applyDateRange(){let a=this.dateForm.get("startDate")?.value,t=this.dateForm.get("endDate")?.value;if(a&&t){if(new Date(a)>new Date(t)){alert("La fecha de inicio debe ser anterior a la fecha de fin");return}let e=this.formatDate(a),o=this.formatDate(t);this.dateRangeChange.emit({startDate:e,endDate:o})}}formatDate(a){let t=a.getFullYear(),e=(a.getMonth()+1).toString().padStart(2,"0"),o=a.getDate().toString().padStart(2,"0");return`${t}-${e}-${o}`}};C.\u0275fac=function(t){return new(t||C)},C.\u0275cmp=y({type:C,selectors:[["app-historial-date-picker"]],inputs:{isLoading:"isLoading"},outputs:{dateRangeChange:"dateRangeChange"},decls:21,vars:4,consts:[["xs","12"],[1,"mb-4"],[3,"formGroup"],["lg","4"],["formControlName","startDate","locale","es-ES","closeOnSelect",""],["formControlName","endDate","locale","es-ES","closeOnSelect",""],["lg","4",1,"d-flex","align-items-end"],["cButton","","color","primary",3,"click","disabled"],["size","sm","class","me-2",4,"ngIf"],["size","sm",1,"me-2"]],template:function(t,e){t&1&&(i(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header")(4,"strong"),m(5,"Historial de Consumo Electrico"),n()(),i(6,"c-card-body")(7,"form",2)(8,"c-row")(9,"c-col",3)(10,"label"),m(11,"Fecha de Inicio:"),n(),p(12,"c-date-picker",4),n(),i(13,"c-col",3)(14,"label"),m(15,"Fecha de Fin:"),n(),p(16,"c-date-picker",5),n(),i(17,"c-col",6)(18,"button",7),g("click",function(){return e.applyDateRange()}),h(19,ue,1,0,"c-spinner",8),m(20),n()()()()()()()()),t&2&&(r(7),s("formGroup",e.dateForm),r(11),s("disabled",!e.dateForm.valid||e.isLoading),r(),s("ngIf",e.isLoading),r(),b(" ",e.isLoading?"Cargando...":"Aplicar Filtro"," "))},dependencies:[E,k,P,B,x,w,N,A,R,I,O,T,M,ae,U,J],encapsulation:2});var L=C;function ge(d,a){if(d&1){let t=S();i(0,"c-form-check",40)(1,"input",41),g("change",function(){_(t);let o=f();return F(o.onFilterChange())}),n(),i(2,"label",42),m(3),n()()}if(d&2){let t=a.$implicit,e=f();r(),s("formControlName",e.getFormControlName(t))("id","edificio-"+e.getFormControlName(t)),r(),s("for","edificio-"+e.getFormControlName(t)),r(),b(" ",t," ")}}function he(d,a){if(d&1){let t=S();i(0,"c-form-check",40)(1,"input",41),g("change",function(){_(t);let o=f();return F(o.onFilterChange())}),n(),i(2,"label",42),m(3),n()()}if(d&2){let t=a.$implicit,e=f();r(),s("formControlName",e.getFormControlName(t))("id","zona-"+e.getFormControlName(t)),r(),s("for","zona-"+e.getFormControlName(t)),r(),b(" ",t," ")}}function fe(d,a){if(d&1){let t=S();i(0,"c-form-check",40)(1,"input",41),g("change",function(){_(t);let o=f();return F(o.onFilterChange())}),n(),i(2,"label",42),m(3),n()()}if(d&2){let t=a.$implicit,e=f();r(),s("formControlName",e.getFormControlName(t))("id","nivel-"+e.getFormControlName(t)),r(),s("for","nivel-"+e.getFormControlName(t)),r(),b(" ",t," ")}}function be(d,a){d&1&&(i(0,"span"),m(1,"Aplicar Filtros"),n())}function Ce(d,a){d&1&&(i(0,"span"),p(1,"span",43),m(2," Aplicando... "),n())}function De(d,a){if(d&1&&(i(0,"small",3),m(1),n()),d&2){let t=f();r(),Z(" (",t.formatDisplayDate(t.selectedDateRange.startDate)," - ",t.formatDisplayDate(t.selectedDateRange.endDate.split(" ")[0]),") ")}}function ve(d,a){d&1&&(i(0,"div",44),p(1,"i",45),i(2,"p"),m(3,"No se encontraron datos para el per\xEDodo seleccionado."),n(),i(4,"p",46),m(5,"Intente seleccionar un rango de fechas diferente."),n()())}function _e(d,a){if(d&1&&p(0,"app-smart-tables-basic-example",47),d&2){let t=f();s("apiData",t.currentApiData)("isLoading",t.isLoadingData)}}var D=class D{constructor(a,t){this.parquetDataService=a;this.formBuilder=t;this.currentApiData=[];this.filteredApiData=[];this.isLoadingData=!1;this.selectedDateRange={startDate:"",endDate:""};this.availableBuildings=[];this.availableZones=[];this.availableLevels=[];this.allApiData=[];this.barChartTitle="Consumo (GTQ)";this.doughnutChartTitle="Distribuci\xF3n de Consumo por Edificio (kWh)";this.voltajePromedio=0;this.amperajeSuma=0;this.consumoKwhSuma=0;this.consumoGtqSuma=0;this.zoneColors=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#C9CBCF","#41B883","#E46651","#00D8FF","#DD1B16","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FECA57","#FF9FF3","#54A0FF","#5F27CD","#00D2D3"];this.options={maintainAspectRatio:!1};this.barChartOptions={maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:function(a){return`${a.dataset.label}: Q.${a.parsed.y.toFixed(2)}`}}}},scales:{y:{beginAtZero:!0,stacked:!0,title:{display:!0,text:"Costo (GTQ)"},ticks:{callback:function(a){return`Q.${a.toFixed(2)}`}}},x:{stacked:!0,title:{display:!0,text:"Edificios"}}}};this.doughnutChartOptions={maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"right"},tooltip:{callbacks:{label:function(a){let t=a.dataset.data.reduce((o,l)=>o+l,0),e=(a.parsed/t*100).toFixed(1);return`${a.label}: ${a.parsed.toFixed(2)} kWh (${e}%)`}}}}};this.months=["January","February","March","April","May","June","July","August","September","October","November","December"];this.chartBarData={labels:[],datasets:[{label:"Consumo El\xE9ctrico (GTQ)",backgroundColor:"#f87979",data:[]}]};this.chartLineData={labels:[...this.months].slice(0,7),datasets:[{label:"My First dataset",backgroundColor:"rgba(220, 220, 220, 0.2)",borderColor:"rgba(220, 220, 220, 1)",pointBackgroundColor:"rgba(220, 220, 220, 1)",pointBorderColor:"#fff",data:[this.randomData,this.randomData,this.randomData,this.randomData,this.randomData,this.randomData,this.randomData]},{label:"My Second dataset",backgroundColor:"rgba(151, 187, 205, 0.2)",borderColor:"rgba(151, 187, 205, 1)",pointBackgroundColor:"rgba(151, 187, 205, 1)",pointBorderColor:"#fff",data:[this.randomData,this.randomData,this.randomData,this.randomData,this.randomData,this.randomData,this.randomData]}]};this.chartLineOptions={maintainAspectRatio:!1};this.chartDoughnutData={labels:[],datasets:[{backgroundColor:["#41B883","#E46651","#00D8FF","#DD1B16","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#E7E9ED"],data:[]}]};this.chartPieData={labels:["Red","Green","Yellow"],datasets:[{data:[300,50,100],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]};this.chartPolarAreaData={labels:["Red","Green","Yellow","Grey","Blue"],datasets:[{data:[11,16,7,3,14],backgroundColor:["#FF6384","#4BC0C0","#FFCE56","#E7E9ED","#36A2EB"]}]};this.chartRadarData={labels:["Eating","Drinking","Sleeping","Designing","Coding","Cycling","Running"],datasets:[{label:"2020",backgroundColor:"rgba(179,181,198,0.2)",borderColor:"rgba(179,181,198,1)",pointBackgroundColor:"rgba(179,181,198,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(179,181,198,1)",data:[65,59,90,81,56,55,40]},{label:"2021",backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",pointBackgroundColor:"rgba(255,99,132,1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(255,99,132,1)",data:[this.randomData,this.randomData,this.randomData,this.randomData,this.randomData,this.randomData,this.randomData]}]};this.filtersForm=this.formBuilder.group({edificios:this.formBuilder.group({}),zonas:this.formBuilder.group({}),niveles:this.formBuilder.group({})})}get PRECIO_KWH(){let a=localStorage.getItem("parametrosMonitoreo");return a?JSON.parse(a).valorKwh:1.51}get randomData(){return Math.round(Math.random()*100)}ngOnInit(){this.updateChartTitles()}loadDataForDateRange(){this.isLoadingData=!0;let a={limit:5e3,fechaInicio:this.selectedDateRange.startDate,fechaFin:this.selectedDateRange.endDate};this.parquetDataService.getFilteredData(a).pipe(K(t=>(console.error("Error al cargar datos de la API en historial:",t),this.isLoadingData=!1,j(null)))).subscribe(t=>{t&&t.success?(this.allApiData=t.data,this.currentApiData=t.data,this.extractUniqueValues(),this.applyFilters()):(this.allApiData=[],this.currentApiData=[],this.availableBuildings=[],this.availableZones=[],this.availableLevels=[]),this.isLoadingData=!1,this.updateCharts()})}updateDateRange(a){this.selectedDateRange.startDate=a.startDate,this.selectedDateRange.endDate=a.endDate+" 23:59:59",this.updateChartTitles(),this.loadDataForDateRange()}formatDisplayDate(a){if(!a)return"";let[t,e,o]=a.split("-").map(l=>parseInt(l,10));return`${o.toString().padStart(2,"0")}/${e.toString().padStart(2,"0")}/${t}`}processDataByBuildingAndZone(){let a={},t=new Set,e=new Set;this.currentApiData.forEach(l=>{let c=l.edificio_nombre,u=l.zona_nombre,v=l.energia_acumulada_calc||0;t.add(c),e.add(u),a[c]||(a[c]={}),a[c][u]||(a[c][u]={consumoKwh:0,costoTotal:0}),a[c][u].consumoKwh+=v,a[c][u].costoTotal=a[c][u].consumoKwh*this.PRECIO_KWH});let o=[];return Object.keys(a).forEach(l=>{Object.keys(a[l]).forEach(c=>{let u=a[l][c];o.push({edificio:l,zona:c,consumoKwh:u.consumoKwh,costoTotal:u.costoTotal,label:`${l} - ${c}`})})}),{buildings:Array.from(t),zones:Array.from(e),data:a,flatData:o}}updateBarChart(){let a=this.processDataByBuildingAndZone(),{buildings:t,zones:e,data:o}=a,l=e.map((c,u)=>{let v=t.map(G=>o[G]&&o[G][c]?o[G][c].costoTotal:0);return{label:c,backgroundColor:this.zoneColors[u%this.zoneColors.length],data:v,stack:"Stack 0"}});this.chartBarData={labels:t,datasets:l}}updateDoughnutChart(){let a=this.processDataByBuildingAndZone(),{buildings:t,data:e}=a,o=t.map(c=>{let u=0;return Object.keys(e[c]||{}).forEach(v=>{u+=e[c][v].consumoKwh}),u}),l=t.map((c,u)=>this.zoneColors[u%this.zoneColors.length]);this.chartDoughnutData={labels:t,datasets:[{backgroundColor:l,data:o}]}}getPeriodText(){if(this.selectedDateRange.startDate&&this.selectedDateRange.endDate){let a=this.formatDisplayDate(this.selectedDateRange.startDate),t=this.formatDisplayDate(this.selectedDateRange.endDate.split(" ")[0]);return` (${a} - ${t})`}return""}updateChartTitles(){let a=this.getPeriodText();this.barChartTitle=`Consumo (GTQ)${a}`,this.doughnutChartTitle=`Distribuci\xF3n de Consumo por Edificio (kWh)${a}`}updateCharts(){this.currentApiData&&this.currentApiData.length>0?(this.updateBarChart(),this.updateDoughnutChart()):this.resetCharts()}resetCharts(){this.chartBarData={labels:[],datasets:[]},this.chartDoughnutData={labels:[],datasets:[{backgroundColor:this.zoneColors,data:[]}]}}extractUniqueValues(){if(this.allApiData.length===0)return;let a=new Set,t=new Set,e=new Set;this.allApiData.forEach(o=>{a.add(o.edificio_nombre),t.add(o.zona_nombre),e.add(o.nivel_nombre)}),this.availableBuildings=Array.from(a).sort(),this.availableZones=Array.from(t).sort(),this.availableLevels=Array.from(e).sort(),this.initializeFilterControls()}initializeFilterControls(){let a=this.formBuilder.group({}),t=this.formBuilder.group({}),e=this.formBuilder.group({});this.availableBuildings.forEach(o=>{let l=this.getFormControlName(o);a.addControl(l,this.formBuilder.control(!0))}),this.availableZones.forEach(o=>{let l=this.getFormControlName(o);t.addControl(l,this.formBuilder.control(!0))}),this.availableLevels.forEach(o=>{let l=this.getFormControlName(o);e.addControl(l,this.formBuilder.control(!0))}),this.filtersForm.setControl("edificios",a),this.filtersForm.setControl("zonas",t),this.filtersForm.setControl("niveles",e)}getFormControlName(a){return a.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"").toLowerCase()}toggleAllBuildings(){let a=this.filtersForm.get("edificios"),t=this.availableBuildings.every(e=>{let o=this.getFormControlName(e);return a.get(o)?.value});this.availableBuildings.forEach(e=>{let o=this.getFormControlName(e);a.get(o)?.setValue(!t)}),this.onFilterChange()}toggleAllZones(){let a=this.filtersForm.get("zonas"),t=this.availableZones.every(e=>{let o=this.getFormControlName(e);return a.get(o)?.value});this.availableZones.forEach(e=>{let o=this.getFormControlName(e);a.get(o)?.setValue(!t)}),this.onFilterChange()}toggleAllLevels(){let a=this.filtersForm.get("niveles"),t=this.availableLevels.every(e=>{let o=this.getFormControlName(e);return a.get(o)?.value});this.availableLevels.forEach(e=>{let o=this.getFormControlName(e);a.get(o)?.setValue(!t)}),this.onFilterChange()}resetFilters(){this.availableBuildings.forEach(a=>{let t=this.getFormControlName(a);this.filtersForm.get(["edificios",t])?.setValue(!0)}),this.availableZones.forEach(a=>{let t=this.getFormControlName(a);this.filtersForm.get(["zonas",t])?.setValue(!0)}),this.availableLevels.forEach(a=>{let t=this.getFormControlName(a);this.filtersForm.get(["niveles",t])?.setValue(!0)}),this.applyFilters()}onFilterChange(){}applyFilters(){let a=this.getSelectedValues("edificios"),t=this.getSelectedValues("zonas"),e=this.getSelectedValues("niveles");this.filteredApiData=this.allApiData.filter(o=>{let l=a.includes(o.edificio_nombre),c=t.includes(o.zona_nombre),u=e.includes(o.nivel_nombre);return l&&c&&u}),this.currentApiData=this.filteredApiData,this.calculateStatistics(),this.updateCharts()}getSelectedValues(a){let t=this.filtersForm.get(a),e=[],o=[];switch(a){case"edificios":o=this.availableBuildings;break;case"zonas":o=this.availableZones;break;case"niveles":o=this.availableLevels;break}return o.forEach(l=>{let c=this.getFormControlName(l);t.get(c)?.value&&e.push(l)}),e}calculateStatistics(){if(this.currentApiData.length===0){this.voltajePromedio=0,this.amperajeSuma=0,this.consumoKwhSuma=0,this.consumoGtqSuma=0;return}let a=this.currentApiData.reduce((t,e)=>t+(e.voltaje||0),0);this.voltajePromedio=a/this.currentApiData.length,this.amperajeSuma=this.currentApiData.reduce((t,e)=>t+(e.corriente||0),0),this.consumoKwhSuma=this.currentApiData.reduce((t,e)=>t+(e.energia_acumulada_calc||0),0),this.consumoGtqSuma=this.consumoKwhSuma*this.PRECIO_KWH}getProgressValue(a,t){if(t===0)return 0;let e=a/t*100;return Math.min(Math.max(e,0),100)}};D.\u0275fac=function(t){return new(t||D)(z(re),z(Y))},D.\u0275cmp=y({type:D,selectors:[["app-charts"]],decls:85,vars:29,consts:[[3,"dateRangeChange","isLoading"],[1,"mb-4"],["xs","12"],[1,"text-muted","ms-2"],[3,"formGroup"],["xs","12","md","4"],[1,"filter-section"],[1,"mb-3"],[1,"fas","fa-building","me-2"],["type","button","title","Seleccionar/Deseleccionar todos",1,"btn","btn-sm","btn-outline-secondary","ms-2",3,"click"],[1,"fas","fa-check-double"],["formGroupName","edificios",1,"checkbox-group"],["class","mb-2",4,"ngFor","ngForOf"],[1,"fas","fa-map-marker-alt","me-2"],["formGroupName","zonas",1,"checkbox-group"],[1,"fas","fa-layer-group","me-2"],["formGroupName","niveles",1,"checkbox-group"],[1,"mt-4"],[1,"d-flex","justify-content-end","gap-2"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-undo","me-2"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-filter","me-2"],[4,"ngIf"],[1,"g-4","mb-4"],["xl","3","md","6","sm","6"],["text","Promedio de todos los datos filtrados",3,"title","value"],["thin","","color","info-gradient",1,"my-2",3,"value"],["text","Suma total de corriente",3,"title","value"],["thin","","color","warning-gradient",1,"my-2",3,"value"],["text","Energ\xEDa total consumida",3,"title","value"],["thin","","color","success-gradient",1,"my-2",3,"value"],["text","Costo total a Q.1.51 por kWh",3,"title","value"],["thin","","color","danger-gradient",1,"my-2",3,"value"],["xs","12","lg","6"],["type","bar",3,"data","options"],["type","doughnut",3,"data","options"],["class","text-muted ms-2",4,"ngIf"],["class","text-center text-muted py-4",4,"ngIf"],[3,"apiData","isLoading",4,"ngIf"],[1,"mb-2"],["cFormCheckInput","","type","checkbox",3,"change","formControlName","id"],["cFormCheckLabel","",1,"filter-label",3,"for"],["role","status",1,"spinner-border","spinner-border-sm","me-2"],[1,"text-center","text-muted","py-4"],[1,"fa","fa-info-circle","fa-2x","mb-3"],[1,"small"],[3,"apiData","isLoading"]],template:function(t,e){t&1&&(i(0,"app-historial-date-picker",0),g("dateRangeChange",function(l){return e.updateDateRange(l)}),n(),i(1,"c-row",1)(2,"c-col",2)(3,"c-card")(4,"c-card-header")(5,"strong"),m(6,"Filtros Avanzados"),n(),i(7,"small",3),m(8,"Selecciona los elementos a incluir en el an\xE1lisis"),n()(),i(9,"c-card-body")(10,"form",4)(11,"c-row")(12,"c-col",5)(13,"div",6)(14,"h6",7),p(15,"i",8),m(16,"Edificios "),i(17,"button",9),g("click",function(){return e.toggleAllBuildings()}),p(18,"i",10),n()(),i(19,"div",11),h(20,ge,4,4,"c-form-check",12),n()()(),i(21,"c-col",5)(22,"div",6)(23,"h6",7),p(24,"i",13),m(25,"Zonas "),i(26,"button",9),g("click",function(){return e.toggleAllZones()}),p(27,"i",10),n()(),i(28,"div",14),h(29,he,4,4,"c-form-check",12),n()()(),i(30,"c-col",5)(31,"div",6)(32,"h6",7),p(33,"i",15),m(34,"Niveles "),i(35,"button",9),g("click",function(){return e.toggleAllLevels()}),p(36,"i",10),n()(),i(37,"div",16),h(38,fe,4,4,"c-form-check",12),n()()()(),i(39,"c-row",17)(40,"c-col",2)(41,"div",18)(42,"button",19),g("click",function(){return e.resetFilters()}),p(43,"i",20),m(44,"Resetear Filtros "),n(),i(45,"button",21),g("click",function(){return e.applyFilters()}),p(46,"i",22),h(47,be,2,0,"span",23)(48,Ce,3,0,"span",23),n()()()()()()()()(),i(49,"c-row",24)(50,"c-col",25)(51,"c-widget-stat-b",26),p(52,"c-progress",27),n()(),i(53,"c-col",25)(54,"c-widget-stat-b",28),p(55,"c-progress",29),n()(),i(56,"c-col",25)(57,"c-widget-stat-b",30),p(58,"c-progress",31),n()(),i(59,"c-col",25)(60,"c-widget-stat-b",32),p(61,"c-progress",33),n()()(),i(62,"c-row")(63,"c-col",34)(64,"c-card",1)(65,"c-card-header"),m(66),n(),i(67,"c-card-body"),p(68,"c-chart",35),n()()(),i(69,"c-col",34)(70,"c-card",1)(71,"c-card-header"),m(72),n(),i(73,"c-card-body"),p(74,"c-chart",36),n()()()(),i(75,"c-row")(76,"c-col",2)(77,"c-card",1)(78,"c-card-header")(79,"strong"),m(80,"Tabla de Datos - Per\xEDodo Seleccionado"),n(),h(81,De,2,2,"small",37),n(),i(82,"c-card-body"),h(83,ve,6,0,"div",38)(84,_e,1,2,"app-smart-tables-basic-example",39),n()()()()),t&2&&(s("isLoading",e.isLoadingData),r(10),s("formGroup",e.filtersForm),r(10),s("ngForOf",e.availableBuildings),r(9),s("ngForOf",e.availableZones),r(9),s("ngForOf",e.availableLevels),r(7),s("disabled",e.isLoadingData),r(2),s("ngIf",!e.isLoadingData),r(),s("ngIf",e.isLoadingData),r(3),s("title","Voltaje (Promedio)")("value",e.voltajePromedio.toFixed(2)+" V"),r(),s("value",e.getProgressValue(e.voltajePromedio,250)),r(2),s("title","Amperaje (Total)")("value",e.amperajeSuma.toFixed(2)+" A"),r(),s("value",e.getProgressValue(e.amperajeSuma,1e3)),r(2),s("title","Consumo (kWh)")("value",e.consumoKwhSuma.toFixed(2)+" kWh"),r(),s("value",e.getProgressValue(e.consumoKwhSuma,5e4)),r(2),s("title","Consumo (GTQ)")("value","Q."+e.consumoGtqSuma.toFixed(2)),r(),s("value",e.getProgressValue(e.consumoGtqSuma,75e3)),r(5),b(" ",e.barChartTitle," "),r(2),s("data",e.chartBarData)("options",e.barChartOptions),r(4),b(" ",e.doughnutChartTitle," "),r(2),s("data",e.chartDoughnutData)("options",e.doughnutChartOptions),r(7),s("ngIf",e.selectedDateRange.startDate&&e.selectedDateRange.endDate),r(2),s("ngIf",!e.isLoadingData&&e.currentApiData.length===0&&e.selectedDateRange.startDate),r(),s("ngIf",e.isLoadingData||e.currentApiData.length>0))},dependencies:[E,H,k,P,B,q,x,w,N,A,Q,R,I,O,T,M,se,ne,L,ee,te,X,ie,oe],styles:[".filter-section[_ngcontent-%COMP%]{border-left:3px solid #007bff;padding-left:1rem;margin-bottom:1rem}.filter-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#495057;font-weight:600;display:flex;align-items:center}.filter-section[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#007bff}.checkbox-group[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;padding-right:.5rem}.checkbox-group[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.checkbox-group[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.checkbox-group[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.checkbox-group[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.filter-label[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:0;cursor:pointer;-webkit-user-select:none;user-select:none}.filter-label[_ngcontent-%COMP%]:hover{color:#007bff}@media (max-width: 768px){.filter-section[_ngcontent-%COMP%]{border-left:none;border-top:3px solid #007bff;padding-left:0;padding-top:1rem;margin-top:1rem}.checkbox-group[_ngcontent-%COMP%]{max-height:150px}}.btn[_ngcontent-%COMP%]{transition:all .2s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #0000001a}.spinner-border-sm[_ngcontent-%COMP%]{width:.75rem;height:.75rem}.card-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#495057}.text-muted[_ngcontent-%COMP%]{font-style:italic}c-widget-stat-b[_ngcontent-%COMP%]{transition:transform .2s ease,box-shadow .2s ease}c-widget-stat-b[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 8px #00000026}c-progress[_ngcontent-%COMP%]{height:4px;border-radius:2px;overflow:hidden}c-progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{transition:width .6s ease}@media (max-width: 576px){.g-4[_ngcontent-%COMP%]{gap:1rem!important}}svg[cIcon][_ngcontent-%COMP%]{filter:drop-shadow(0 1px 2px rgba(0,0,0,.1))}"]});var le=D;export{le as ChartsComponent};
