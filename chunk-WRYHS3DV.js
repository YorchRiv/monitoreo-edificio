import{Ga as N,Ka as L,Oa as A,Pa as B,Wa as k,X as K,Ya as H,c as M,d as a,e as x,f as F,m as D,n as V,na as E,oa as G,p as S,r as w,ra as j,v as y,y as I}from"./chunk-HSKCSBWS.js";import"./chunk-XX3OU7O5.js";import"./chunk-P5LOYQB2.js";import"./chunk-HEI3NBOD.js";import{s as g}from"./chunk-KV5YFX3I.js";import"./chunk-FPPZ4BUR.js";import"./chunk-QHBPP6FM.js";import{$c as p,Fc as t,Hc as u,Wb as C,Xb as o,Yb as e,Zb as s,bd as c,cb as m,ib as f,nc as b,rb as v}from"./chunk-7GBT3Z6V.js";import{a as d,b as h}from"./chunk-ZOGHMS73.js";var n=class n{constructor(i){this.fb=i;this.limiteDiario=0;this.limiteMensual=0;this.limiteAnual=0;this.defaultValues={valorKwh:1.51,limiteMensualKwh:15e3,voltajeMinimo:110,voltajeMaximo:130};this.parametrosForm=this.fb.group({valorKwh:[this.defaultValues.valorKwh,[a.required,a.min(0)]],limiteMensualKwh:[this.defaultValues.limiteMensualKwh,[a.required,a.min(0)]],voltajeMinimo:[this.defaultValues.voltajeMinimo,[a.required,a.min(0)]],voltajeMaximo:[this.defaultValues.voltajeMaximo,[a.required,a.min(0)]]})}ngOnInit(){let i=localStorage.getItem("parametrosMonitoreo");if(i){let r=JSON.parse(i);this.parametrosForm.patchValue(r),this.calcularLimites(r.limiteMensualKwh)}else this.calcularLimites(this.defaultValues.limiteMensualKwh);this.parametrosForm.get("limiteMensualKwh")?.valueChanges.subscribe(r=>{r&&this.calcularLimites(r)})}calcularLimites(i){this.limiteDiario=parseFloat((i/30).toFixed(2)),this.limiteMensual=parseFloat(i.toFixed(2)),this.limiteAnual=parseFloat((i*12).toFixed(2))}guardarCambios(){if(this.parametrosForm.valid){let i=h(d({},this.parametrosForm.value),{limiteConsumoDiario:this.limiteDiario,limiteConsumoMensual:this.limiteMensual,limiteConsumoAnual:this.limiteAnual});try{localStorage.setItem("parametrosMonitoreo",JSON.stringify(i)),console.log("Valores guardados:",i),alert("Cambios guardados exitosamente")}catch(r){console.error("Error al guardar:",r),alert("Error al guardar los cambios")}}else alert("Por favor, verifica que todos los campos est\xE9n correctamente llenos")}restablecerValores(){this.parametrosForm.patchValue(this.defaultValues),this.calcularLimites(this.defaultValues.limiteMensualKwh);let i=h(d({},this.defaultValues),{limiteConsumoDiario:this.limiteDiario,limiteConsumoMensual:this.limiteMensual,limiteConsumoAnual:this.limiteAnual});localStorage.setItem("parametrosMonitoreo",JSON.stringify(i)),console.log("Valores restablecidos a los valores por defecto:",i)}};n.\u0275fac=function(r){return new(r||n)(f(y))},n.\u0275cmp=v({type:n,selectors:[["app-input-groups"]],decls:46,vars:13,consts:[["xs","12"],[1,"mb-4"],[1,"text-body-secondary","small"],[3,"formGroup"],[1,"mb-3"],["cInputGroupText","","id","basic-addon1"],["aria-describedby","basic-addon1","aria-label","valor-kwh","cFormControl","","formControlName","valorKwh","placeholder","Valor KWH","type","number","step","0.01"],["aria-describedby","basic-addon1","aria-label","limite-mensual","cFormControl","","formControlName","limiteMensualKwh","placeholder","Limite Mensual KWH","type","number"],["cLabel","","for","multiple-inputs"],["cInputGroupText",""],["aria-label","Voltaje Minimo","placeholder","Voltaje Minimo","cFormControl","","formControlName","voltajeMinimo","type","number"],["aria-label","Voltaje Maximo","placeholder","Voltaje Maximo","cFormControl","","formControlName","voltajeMaximo","type","number"],[1,"d-grid","gap-2","col-6","mx-auto"],["cButton","","color","primary",3,"click"],["cButton","","color","secondary",3,"click"]],template:function(r,l){r&1&&(o(0,"c-row")(1,"c-col",0)(2,"c-card",1)(3,"c-card-header"),t(4,`
        `),o(5,"strong"),t(6,"Configuracion de Parametros"),e(),t(7,`
      `),e(),o(8,"c-card-body")(9,"p",2),t(10," Utilice este modulo para configurar los parametros del sistema de monitoreo. "),e(),o(11,"form",3)(12,"label"),t(13,"Valor KWH (GTQ)"),e(),o(14,"c-input-group",4)(15,"span",5),t(16,"GTQ"),e(),s(17,"input",6),e(),o(18,"label"),t(19,"Limite Mensual KWH"),e(),o(20,"c-input-group",4)(21,"span",5),t(22,"KWH"),e(),s(23,"input",7),e(),o(24,"p",2),t(25),p(26,"number"),e(),o(27,"p",2),t(28),p(29,"number"),e(),o(30,"p",2),t(31),p(32,"number"),e(),o(33,"label",8),t(34,"Rangos de Voltaje"),e(),o(35,"c-input-group")(36,"span",9),t(37,"Voltaje Minimo y Maximo"),e(),s(38,"input",10)(39,"input",11),e(),s(40,"div",1),o(41,"div",12)(42,"button",13),b("click",function(){return l.guardarCambios()}),t(43,"Guardar Cambios"),e(),o(44,"button",14),b("click",function(){return l.restablecerValores()}),t(45,"Restablecer"),e()()()()()()()),r&2&&(m(11),C("formGroup",l.parametrosForm),m(14),u("Limite Diario: ",c(26,4,l.limiteDiario,"1.0-2")," KWH"),m(3),u("Limite Mensual: ",c(29,7,l.limiteMensual,"1.0-2")," KWH"),m(3),u("Limite Anual: ",c(32,10,l.limiteAnual,"1.0-2")," KWH"))},dependencies:[H,k,E,j,G,A,B,N,L,K,I,D,M,V,x,F,S,w,g],encapsulation:2});var T=n;export{T as InputGroupsComponent};
