<!-- Date picker section -->
<app-historial-date-picker 
  [isLoading]="isLoadingData"
  (dateRangeChange)="updateDateRange($event)">
</app-historial-date-picker>

<!-- Gráficas Chart.js - Parte Superior -->
<c-row>
  <c-col xs="12" lg="4">
    <c-card class="mb-4">
      <c-card-header>
        Consumo (GTQ)
      </c-card-header>
      <c-card-body>
        <c-chart type="bar" [data]="chartBarData" [options]="options" />
      </c-card-body>
    </c-card>
  </c-col>
  <c-col xs="12" lg="4">
    <c-card class="mb-4">
      <c-card-header>
        Line Chart
      </c-card-header>
      <c-card-body>
        <c-chart type="line" [data]="chartLineData" [options]="options" />
      </c-card-body>
    </c-card>
  </c-col>
  <c-col xs="12" lg="4">
    <c-card class="mb-4">
      <c-card-header>
        Doughnut Chart
      </c-card-header>
      <c-card-body>
        <c-chart type="doughnut" [data]="chartDoughnutData" [options]="options" />
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<!-- Smart table with filtered data -->
<c-row>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header>
        <strong>Tabla de Datos - Período Seleccionado</strong>
        <small class="text-muted ms-2" *ngIf="selectedDateRange.startDate && selectedDateRange.endDate">
          ({{ formatDisplayDate(selectedDateRange.startDate) }} - {{ formatDisplayDate(selectedDateRange.endDate.split(' ')[0]) }})
        </small>
      </c-card-header>
      <c-card-body>
        <div *ngIf="!isLoadingData && currentApiData.length === 0 && selectedDateRange.startDate" 
             class="text-center text-muted py-4">
          <i class="fa fa-info-circle fa-2x mb-3"></i>
          <p>No se encontraron datos para el período seleccionado.</p>
          <p class="small">Intente seleccionar un rango de fechas diferente.</p>
        </div>
        
        <app-smart-tables-basic-example 
          [apiData]="currentApiData" 
          [isLoading]="isLoadingData"
          *ngIf="isLoadingData || currentApiData.length > 0">
        </app-smart-tables-basic-example>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>

<!-- Gráficas Chart.js - Parte Inferior -->
<c-row>
  <c-col xs="12" lg="4">
    <c-card class="mb-4">
      <c-card-header>
        Pie Chart
      </c-card-header>
      <c-card-body>
        <c-chart type="pie" [data]="chartPieData" [options]="options" />
      </c-card-body>
    </c-card>
  </c-col>
  <c-col xs="12" lg="4">
    <c-card class="mb-4">
      <c-card-header>
        Polar Area Chart
      </c-card-header>
      <c-card-body>
        <c-chart type="polarArea" [data]="chartPolarAreaData" [options]="options" />
      </c-card-body>
    </c-card>
  </c-col>
  <c-col xs="12" lg="4">
    <c-card class="mb-4">
      <c-card-header>
        Radar Chart
      </c-card-header>
      <c-card-body>
        <c-chart type="radar" [data]="chartRadarData" [options]="options" />
      </c-card-body>
    </c-card>
  </c-col>
</c-row>
