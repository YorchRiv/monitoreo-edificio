import{a as U}from"./chunk-5RQBA33T.js";import{B as T,Da as V,Ga as A,Oa as j,Pa as B,Ua as k,Wa as P,X as D,Ya as H,Z as q,c as w,d as s,e as x,f as I,m as y,na as L,oa as M,p as G,r as N,v as R,y as _}from"./chunk-HSKCSBWS.js";import{h as S}from"./chunk-XX3OU7O5.js";import"./chunk-P5LOYQB2.js";import"./chunk-HEI3NBOD.js";import"./chunk-KV5YFX3I.js";import"./chunk-FPPZ4BUR.js";import"./chunk-QHBPP6FM.js";import{Fc as l,Hc as h,Wb as u,Xb as i,Yb as r,Zb as n,cb as a,ib as g,na as p,nc as E,oa as d,qc as f,rb as F,xb as b}from"./chunk-7GBT3Z6V.js";import"./chunk-ZOGHMS73.js";function z(c,e){if(c&1&&(i(0,"c-alert",21),l(1),r()),c&2){let t=f();a(),h(" ",t.error," ")}}function J(c,e){if(c&1&&(i(0,"c-alert",22),l(1),r()),c&2){let t=f();a(),h(" ",t.success," ")}}var m=class m{constructor(e,t,o){this.fb=e;this.authService=t;this.router=o;this.error="";this.loading=!1;this.success="";this.registerForm=this.fb.group({nombre:["",[s.required]],apellido:["",[s.required]],email:["",[s.required,s.email]],password:["",[s.required,s.minLength(6)]],repeatPassword:["",[s.required]]},{validators:this.passwordsMatchValidator})}passwordsMatchValidator(e){return e.get("password")?.value===e.get("repeatPassword")?.value?null:{mismatch:!0}}onSubmit(){if(this.registerForm.valid){this.loading=!0,this.error="",this.success="";let{nombre:e,apellido:t,email:o,password:v}=this.registerForm.value;this.authService.register(e,t,o,v).subscribe({next:C=>{this.loading=!1,this.success="Usuario registrado exitosamente. Redirigiendo...",setTimeout(()=>{this.router.navigate(["/login"])},1500)},error:C=>{this.loading=!1,this.error=C}})}else{let e=[];this.registerForm.get("nombre")?.hasError("required")&&e.push("El nombre es obligatorio"),this.registerForm.get("apellido")?.hasError("required")&&e.push("El apellido es obligatorio"),this.registerForm.get("email")?.hasError("required")&&e.push("El correo electr\xF3nico es obligatorio"),this.registerForm.get("email")?.hasError("email")&&e.push("Ingrese un correo electr\xF3nico v\xE1lido"),this.registerForm.get("password")?.hasError("required")&&e.push("La contrase\xF1a es obligatoria"),this.registerForm.get("password")?.hasError("minlength")&&e.push("La contrase\xF1a debe tener al menos 6 caracteres"),this.registerForm.hasError("mismatch")&&e.push("Las contrase\xF1as no coinciden"),this.registerForm.get("repeatPassword")?.hasError("required")&&e.push("Debe repetir la contrase\xF1a"),this.error=e.join(". "),Object.keys(this.registerForm.controls).forEach(t=>{let o=this.registerForm.get(t);o?.invalid&&o.markAsTouched()})}}};m.\u0275fac=function(t){return new(t||m)(g(R),g(U),g(S))},m.\u0275cmp=F({type:m,selectors:[["app-register"]],decls:36,vars:5,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],[1,"justify-content-center"],["lg","7","md","9","xl","6"],[1,"mx-4"],[1,"p-4"],["cForm","",3,"ngSubmit","formGroup"],[1,"text-body-secondary"],["color","danger","variant","solid",4,"ngIf"],["color","success","variant","solid",4,"ngIf"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["autoComplete","given-name","cFormControl","","formControlName","nombre","placeholder","Nombre"],["autoComplete","family-name","cFormControl","","formControlName","apellido","placeholder","Apellido"],["autoComplete","email","cFormControl","","formControlName","email","placeholder","Correo electr\xF3nico"],["cIcon","","name","cilLockLocked"],["autoComplete","new-password","cFormControl","","formControlName","password","placeholder","Contrase\xF1a","type","password"],[1,"mb-4"],["autoComplete","new-password","cFormControl","","formControlName","repeatPassword","placeholder","Repetir contrase\xF1a","type","password"],[1,"d-grid"],["cButton","","color","success","type","submit",3,"disabled"],["color","danger","variant","solid"],["color","success","variant","solid"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"c-container")(2,"c-row",1)(3,"c-col",2)(4,"c-card",3)(5,"c-card-body",4)(6,"form",5),E("ngSubmit",function(){return o.onSubmit()}),i(7,"h1"),l(8,"Registro"),r(),i(9,"p",6),l(10,"Crea tu cuenta"),r(),b(11,z,2,1,"c-alert",7)(12,J,2,1,"c-alert",8),i(13,"c-input-group",9)(14,"span",10),p(),n(15,"svg",11),r(),d(),n(16,"input",12),r(),i(17,"c-input-group",9)(18,"span",10),p(),n(19,"svg",11),r(),d(),n(20,"input",13),r(),i(21,"c-input-group",9)(22,"span",10),l(23,"@"),r(),n(24,"input",14),r(),i(25,"c-input-group",9)(26,"span",10),p(),n(27,"svg",15),r(),d(),n(28,"input",16),r(),i(29,"c-input-group",17)(30,"span",10),p(),n(31,"svg",15),r(),d(),n(32,"input",18),r(),i(33,"div",19)(34,"button",20),l(35),r()()()()()()()()()),t&2&&(a(6),u("formGroup",o.registerForm),a(5),u("ngIf",o.error),a(),u("ngIf",o.success),a(22),u("disabled",o.loading),a(),h(" ",o.loading?"Registrando...":"Crear cuenta"," "))},dependencies:[k,H,P,L,M,V,j,B,T,A,D,_,y,w,x,I,G,N,q],encapsulation:2});var O=m;export{O as RegisterComponent};
