import{a as Y}from"./chunk-5RQBA33T.js";import{B as j,Da as U,Ga as W,Oa as z,Pa as J,Ua as K,Wa as Q,X as M,Ya as X,Z as V,c as N,d,e as k,f as D,m as G,na as H,oa as O,p as B,qa as P,r as R,v as q,y as A}from"./chunk-HSKCSBWS.js";import{h as T}from"./chunk-XX3OU7O5.js";import"./chunk-P5LOYQB2.js";import"./chunk-HEI3NBOD.js";import{j as E,l as w,m as L}from"./chunk-KV5YFX3I.js";import"./chunk-FPPZ4BUR.js";import"./chunk-QHBPP6FM.js";import{Fc as m,Hc as S,Tc as I,Uc as x,Wb as a,Xb as o,Yb as n,Zb as u,cb as l,ib as _,na as F,nc as b,oa as C,qc as h,rb as y,xb as c}from"./chunk-7GBT3Z6V.js";import"./chunk-ZOGHMS73.js";var Z=i=>({"is-invalid":i}),ee=()=>({"minWidth.%":44});function te(i,r){if(i&1&&(o(0,"c-alert",23),m(1),n()),i&2){let t=h();l(),S(" ",t.error," ")}}function ne(i,r){i&1&&(o(0,"span"),m(1,"El correo electr\xF3nico es requerido"),n())}function ie(i,r){i&1&&(o(0,"span"),m(1,"Ingrese un correo electr\xF3nico v\xE1lido"),n())}function oe(i,r){if(i&1&&(o(0,"div",24),c(1,ne,2,0,"span",25)(2,ie,2,0,"span",25),n()),i&2){let t,e,s=h();l(),a("ngIf",(t=s.loginForm.get("email"))==null||t.errors==null?null:t.errors.required),l(),a("ngIf",(e=s.loginForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function re(i,r){i&1&&(o(0,"span"),m(1,"La contrase\xF1a es requerida"),n())}function le(i,r){i&1&&(o(0,"span"),m(1,"La contrase\xF1a debe tener al menos 6 caracteres"),n())}function ae(i,r){if(i&1&&(o(0,"div",24),c(1,re,2,0,"span",25)(2,le,2,0,"span",25),n()),i&2){let t,e,s=h();l(),a("ngIf",(t=s.loginForm.get("password"))==null||t.errors==null?null:t.errors.required),l(),a("ngIf",(e=s.loginForm.get("password"))==null||e.errors==null?null:e.errors.minlength)}}var p=class p{constructor(r,t,e){this.fb=r;this.authService=t;this.router=e;this.error="";this.loading=!1;this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]})}onSubmit(){if(this.loginForm.valid){this.loading=!0,this.error="";let{email:r,password:t}=this.loginForm.value;this.authService.login(r,t).subscribe({next:e=>{this.loading=!1,this.router.navigate(["/dashboard"])},error:e=>{this.loading=!1,this.error=e}})}else{let r=[];this.loginForm.get("email")?.hasError("required")&&r.push("El correo electr\xF3nico es obligatorio"),this.loginForm.get("email")?.hasError("email")&&r.push("Ingrese un correo electr\xF3nico v\xE1lido"),this.loginForm.get("password")?.hasError("required")&&r.push("La contrase\xF1a es obligatoria"),this.loginForm.get("password")?.hasError("minlength")&&r.push("La contrase\xF1a debe tener al menos 6 caracteres"),this.error=r.join(". "),Object.keys(this.loginForm.controls).forEach(t=>{let e=this.loginForm.get(t);e?.invalid&&e.markAsTouched()})}}goToRegister(){this.router.navigate(["/register"])}};p.\u0275fac=function(t){return new(t||p)(_(q),_(Y),_(T))},p.\u0275cmp=y({type:p,selectors:[["app-login"]],decls:39,vars:15,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","10","xl","8"],[1,"p-4"],["cForm","",3,"ngSubmit","formGroup"],[1,"text-body-secondary"],["color","danger","variant","solid",4,"ngIf"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["autoComplete","email","cFormControl","","formControlName","email","placeholder","Correo electr\xF3nico",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["autoComplete","current-password","cFormControl","","formControlName","password","placeholder","Contrase\xF1a","type","password",3,"ngClass"],["xs","6"],["cButton","","type","submit","color","primary",1,"px-4",3,"disabled"],["xs","6",1,"text-end"],["cButton","","color","link",1,"px-0"],[1,"text-white","bg-primary","py-5",3,"ngStyle"],[1,"text-center"],["cButton","","color","primary",1,"mt-3",3,"click","active"],["color","danger","variant","solid"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,e){if(t&1&&(o(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5),b("ngSubmit",function(){return e.onSubmit()}),o(8,"h1"),m(9,"Iniciar Sesi\xF3n"),n(),o(10,"p",6),m(11,"Ingresa a tu cuenta"),n(),c(12,te,2,1,"c-alert",7),o(13,"c-input-group",8)(14,"span",9),F(),u(15,"svg",10),n(),C(),u(16,"input",11),c(17,oe,3,2,"div",12),n(),o(18,"c-input-group",13)(19,"span",9),F(),u(20,"svg",14),n(),C(),u(21,"input",15),c(22,ae,3,2,"div",12),n(),o(23,"c-row")(24,"c-col",16)(25,"button",17),m(26),n()(),o(27,"c-col",18)(28,"button",19),m(29," \xBFOlvidaste tu contrase\xF1a? "),n()()()()()(),o(30,"c-card",20)(31,"c-card-body",21)(32,"div")(33,"h2"),m(34,"Registrarse"),n(),o(35,"p"),m(36," \xBFNo tienes una cuenta? Reg\xEDstrate para acceder a todas las funciones del sistema de monitoreo de edificios. "),n(),o(37,"button",22),b("click",function(){return e.goToRegister()}),m(38," \xA1Reg\xEDstrate ahora! "),n()()()()()()()()()),t&2){let s,g,f,v;l(7),a("formGroup",e.loginForm),l(5),a("ngIf",e.error),l(4),a("ngClass",x(10,Z,((s=e.loginForm.get("email"))==null?null:s.invalid)&&((s=e.loginForm.get("email"))==null?null:s.touched))),l(),a("ngIf",((g=e.loginForm.get("email"))==null?null:g.invalid)&&((g=e.loginForm.get("email"))==null?null:g.touched)),l(4),a("ngClass",x(12,Z,((f=e.loginForm.get("password"))==null?null:f.invalid)&&((f=e.loginForm.get("password"))==null?null:f.touched))),l(),a("ngIf",((v=e.loginForm.get("password"))==null?null:v.invalid)&&((v=e.loginForm.get("password"))==null?null:v.touched)),l(3),a("disabled",e.loading),l(),S(" ",e.loading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," "),l(4),a("ngStyle",I(14,ee)),l(7),a("active",!0)}},dependencies:[K,X,Q,P,H,O,U,z,J,j,W,M,L,E,w,A,G,N,k,D,B,R,V],encapsulation:2});var $=p;export{$ as LoginComponent};
